<!DOCTYPE html>
<html>
<head>
    <title>Genius F5LE Reset Tool</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #f0f0f0; }
        .btn { padding: 20px; font-size: 20px; cursor: pointer; background: #28a745; color: white; border: none; border-radius: 10px; }
        #log { margin-top: 20px; color: #666; font-family: monospace; }
    </style>
</head>
<body>
    <button class="btn" id="go">FORCE CONNECT</button>
    <div id="status">Status: IDLE</div>
    <div id="log"></div>

    <script>
        const log = (m) => { document.getElementById('log').innerHTML += `<p>${m}</p>`; };
        
        document.getElementById('go').onclick = async () => {
            try {
                document.getElementById('status').innerText = "Scanning...";
                // We use 'acceptAllDevices' to bypass filter errors
                const device = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true,
                    optionalServices: ['0000fee7-0000-1000-8000-00805f9b34fb', 'battery_service', 'heart_rate']
                });

                log("Device found. Connecting...");
                const server = await device.gatt.connect();
                document.getElementById('status').innerText = "CONNECTED!";
                
                // Keep the connection alive by pinging battery
                const bat = await server.getPrimaryService('battery_service');
                const char = await bat.getCharacteristic('battery_level');
                const val = await char.readValue();
                log("Battery check successful: " + val.getUint8(0) + "%");
                
            } catch (e) {
                log("FAIL: " + e.message);
                document.getElementById('status').innerText = "Connection Failed";
            }
        };
    </script>
</body>
</html>
